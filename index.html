<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"
    />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.47.0/codemirror.css"
    />
    <link
      href="https://fonts.googleapis.com/css?family=Inconsolata&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="style/style.css" />
    <title>Velocity Curve Generator</title>
  </head>
  <body>
    <h1 class="title">
      MIDI Velocity Curve generator for Logic Pro X's Scripter
    </h1>

    <p class="mainText">
      This tool can generate custom MIDI velocity curves for Logic Pro X’s
      Scripter MIDI effect plugin. Drag points to adjust the velocity curve.
      Double-click to add or remove points.
    </p>

    <div class="curveTool">
      <div class="yLabel">
        <div class="yMax">127</div>
        <div class="yText">OUT</div>
        <div class="yMin">0</div>
      </div>
      <div id="curve"></div>
      <div class="xLabel">
        <span class="xMin">0</span>
        <span class="xText">IN</span>
        <span class="xMax">127</span>
      </div>
    </div>

    <fieldset>
      <input
        id="item-1"
        class="radio-inline__input"
        type="radio"
        name="accessible-radio"
        value="smooth"
        checked="checked"
      />
      <label class="radio-inline__label" for="item-1">
        Smooth
      </label>
      <input
        id="item-2"
        class="radio-inline__input"
        type="radio"
        name="accessible-radio"
        value="monotonic"
      />
      <label class="radio-inline__label" for="item-2">
        Monotonic
      </label>
    </fieldset>

    <div class="loader">
      <input
        type="text"
        id="loadCurveInput"
        placeholder="Load an existing JSON velocity curve"
        class="loadInput"
      />
      <button onClick="loadCurve()" class="button">Load</button>
    </div>

    <h2 class="subtitle">Generated code</h2>

    <p class="mainText">
      Paste the JavaScript code below into Scripter’s Code Editor.
    </p>

    <div id="editor"></div>

    <button onClick="copyCode()" class="button">Copy code</button>

    <h2 class="subtitle">Why?</h2>

    <p class="mainText">
      If you are not already familiar with MIDI velocity curves, this great
      <a
        href="https://www.soundonsound.com/sound-advice/q-which-midi-velocity-curve-should-i-use-my-controller-keyboard"
        target="_blank"
        >Sound On Sound answer</a
      >
      is worth a read. Basically, not all keyboards are created the same way;
      some keyboard models have a lighter or heavier velocity mapping. For
      example, the maximum velocity on my Yamaha keyboard is about 110. This
      means I cannot produce any velocities above 110. This has caused problems
      for me, especially with some sampled piano libraries, as their sample
      velocities are usually mapped fairly linearly from 0 to 127, meaning I
      could never trigger any higher velocity samples.
    </p>

    <p class="mainText">
      Luckily, Logic Pro X has a great
      <a
        href="https://support.apple.com/kb/PH27734?locale=en_US"
        target="_blank"
        >Scripter</a
      >
      MIDI FX plugin that lets you use JavaScript to manipulate incoming MIDI
      data. Create your custom velocity curve and copy the generated code into
      Scripter's Script Editor. You can save your velocity curve as a Scripter
      preset for easy loading.
    </p>

    <h2 class="subtitle">Built with</h2>

    <p class="mainText">
      This little project would not have been possible without
      <a href="https://github.com/jonathanlurie/canvasSpliner">CanvasSpliner</a
      >. Code view was created with
      <a href="https://codemirror.net/">CodeMirror</a> editor.
    </p>

    <footer></footer>

    <!-- JavaScript -->
    <script src="script/CanvasSpliner.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.47.0/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.47.0/mode/javascript/javascript.min.js"></script>
    <script src="script/main.js"></script>
  </body>
</html>
